var win,head;function randomNumber(e,n){var t=Math.random()*(n-e)+e;return Math.round(t)}function startFire(){var o=win.width(),a=$("#smoke"),e=o<700?15:80;for(i=0;i<e;i++){var n=randomNumber(0,3e4);setTimeout(function(){var e=(o<700?50:randomNumber(25,75))+"%",n=win.scrollTop()+win.height();if(n<2200){var t=a.clone();t.css({left:e,top:n}).addClass("smoke"+randomNumber(1,3)),$("body").append(t)}},n)}}function checkWinPos(e){0===win.scrollTop()&&e&&head.removeClass("not-at-top").addClass("at-top"),100<win.scrollTop()&&head.removeClass("at-top").addClass("not-at-top")}function contactForm(){$("#contact-form").submit(function(){var n=$(this),e="";return n.find(".info").removeClass("is-error").text(""),""==$.trim(n.find("[name=first]").val())?e="First name is required":""==$.trim(n.find("[name=last]").val())?e="Last name is required":""!=$.trim(n.find("[name=phone]").val())||n.find("[name=email]").val().includes("@")||(e="A valid phone number of email address is required"),""==e?$.post("/php/mailer.php",n.serialize()).done(function(e){"success"==e?(n[0].reset(),n.find(".info").text("Message Sent. We will be in touch. Thank you."),sendEvent("contact-form")):n.find(".info").addClass("is-error").text("Error encountered. Please call us at 704-996-3439.")}):n.find(".info").addClass("is-error").text(e),!1})}function goToSection(e,n,t){var o="/"==n?0:$(e).offset().top-100;t?$("html, body").stop().animate({scrollTop:o},500):$("html, body").scrollTop(o)}function sendPageView(e){gtag("config","UA-139848868-1",{page_path:e})}function sendEvent(e){switch(console.log("sendEvent "+e),e){case"hero-cta":ga("send","event","Contact","CTA Link Clicked","Hero CTA");break;case"contact-form":ga("send","event","Contact","Form Submitted","Contact Form")}}$(function(){if(win=$(window),head=$("header"),checkWinPos(),contactForm(),-1!==window.location.pathname.indexOf("/sections/")){var e=window.location.pathname;"/"==e[e.length-1]&&(e=e.substring(0,e.length-1)),goToSection($('a[href="'+e+'"]').data("section"),e)}win.scroll(function(){checkWinPos(!0)}),window.onpopstate=function(e){null!=e.state&&null!=e.state.section&&null!=e.state.path&&(goToSection(e.state.section,e.state.path),sendPageView(e.state.path))},$("a.jump-link").click(function(e){e.preventDefault();var n=$(this),t=n.data("section"),o=n.attr("href");goToSection(t,o,!0),sendPageView(o),n.hasClass("hero-cta")&&sendEvent("hero-cta"),window.history.pushState({section:t,path:o},null,o)}),$(".band-member").hover(function(){var e=$(this);setTimeout(function(){0<$("#"+e.attr("id")+":hover").length&&(e.find(".band-member-bio").slideDown(),e.find(".band-member-image").addClass("fadeout-image"))},250)},function(){var e=$(this);e.find(".band-member-bio").slideUp(),e.find(".band-member-image").removeClass("fadeout-image")})});